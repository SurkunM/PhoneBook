"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[283],{6283:function(e,t,s){s.r(t),s.d(t,{default:function(){return f}});var o=s(6768),r=s(5130),a=s(1374),l=s(5098),n=s(5939),c=s(365),i=s(9633);const h={class:"me-4"};function m(e,t,s,m,u,d){return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(n.r,{class:"bg-grey-darken-1"},{default:(0,o.k6)((()=>[(0,o.Lk)("h2",h,[(0,o.bF)(c.w,{icon:"mdi-account-plus",size:"small"}),t[4]||(t[4]=(0,o.eW)(" Новый контакт "))])])),_:1}),(0,o.bo)((0,o.bF)(a.l,{text:"Контакт успешно создан",type:"success",variant:"outlined"},null,512),[[r.aG,u.isShowSuccessAlert]]),(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,r.D$)(((...e)=>d.submitForm&&d.submitForm(...e)),["prevent"]))},[(0,o.bF)(i.W,{modelValue:u.contact.lastName,"onUpdate:modelValue":t[0]||(t[0]=e=>u.contact.lastName=e),modelModifiers:{trim:!0},"error-messages":u.errors.lastName,onChange:d.checkLastNameFieldComplete,autocomplete:"off",label:"Фамилия"},null,8,["modelValue","error-messages","onChange"]),(0,o.bF)(i.W,{modelValue:u.contact.firstName,"onUpdate:modelValue":t[1]||(t[1]=e=>u.contact.firstName=e),modelModifiers:{trim:!0},"error-messages":u.errors.firstName,onChange:d.checkFirstNameFieldComplete,autocomplete:"off",label:"Имя"},null,8,["modelValue","error-messages","onChange"]),(0,o.bF)(i.W,{modelValue:u.contact.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>u.contact.phone=e),modelModifiers:{trim:!0},"error-messages":u.errors.phone,onChange:d.checkPhoneFieldComplete,autocomplete:"off",label:"Телефон",class:"mb-3"},null,8,["modelValue","error-messages","onChange"]),(0,o.bF)(l.D,{class:"me-4",color:"info",type:"submit"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)("Сохранить")]))),_:1}),(0,o.bF)(l.D,{color:"secondary",onClick:d.resetForm},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("Очистить")]))),_:1},8,["onClick"])],32)],64)}var u={data(){return{isShowSuccessAlert:!1,contact:{firstName:"",lastName:"",phone:"",isChecked:!1},errors:{firstName:"",lastName:"",phone:""}}},methods:{checkFieldsIsvalid(e){let t=!0;0===e.firstName.length&&(this.errors.firstName="Заполните поле Имя",t=!1),0===e.lastName.length&&(this.errors.lastName="Заполните поле Фамилия",t=!1),0===e.phone.length&&(this.errors.phone="Заполните поле Телефон",t=!1);const s=Number(e.phone);return(isNaN(s)||s<0)&&(this.errors.phone="Неверный формат номера телефона",t=!1),t},checkFirstNameFieldComplete(){this.contact.firstName.length>0&&(this.errors.firstName="")},checkLastNameFieldComplete(){this.contact.lastName.length>0&&(this.errors.lastName="")},checkPhoneFieldComplete(){this.contact.phone.length>0&&(this.errors.phone="")},setExistPhoneInvalid(){this.errors.phone="Номер телефона уже существует"},submitForm(){if(!this.checkFieldsIsvalid(this.contact))return;const e={firstName:this.contact.firstName,lastName:this.contact.lastName,phone:this.contact.phone};this.$store.dispatch("createContact",e).then((()=>{this.resetForm(),this.showSuccessAlert()})).catch((t=>{400===t.response?.status?this.checkFieldsIsvalid(e):409===t.response?.status&&this.setExistPhoneInvalid()}))},resetForm(){this.contact={firstName:"",lastName:"",phone:""},this.errors={firstName:"",lastName:"",phone:""}},showSuccessAlert(){this.isShowSuccessAlert=!0,setTimeout((()=>{this.isShowSuccessAlert=!1}),1500)}}},d=s(1241);const p=(0,d.A)(u,[["render",m]]);var f=p}}]);
//# sourceMappingURL=283.8145033b.js.map
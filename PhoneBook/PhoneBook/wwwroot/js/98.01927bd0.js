"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[98],{2717:function(e,t,s){s.r(t),s.d(t,{default:function(){return f}});var o=s(6768),a=s(5130),r=s(5098),l=s(5939),n=s(365),c=s(9416),i=s(9633);const m={class:"me-4"};function h(e,t,s,h,u,d){return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l.r,{class:"bg-grey-darken-1"},{default:(0,o.k6)((()=>[(0,o.Lk)("h2",m,[(0,o.bF)(n.w,{icon:"mdi-account-plus",size:"small"}),t[5]||(t[5]=(0,o.eW)(" Новый контакт "))])])),_:1}),(0,o.bF)(c.K,{modelValue:u.isShowSuccessAlert,"onUpdate:modelValue":t[0]||(t[0]=e=>u.isShowSuccessAlert=e),timeout:2e3,color:"success"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("Контакт успешно создан ")]))),_:1},8,["modelValue"]),(0,o.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>d.submitForm&&d.submitForm(...e)),["prevent"])),class:"mx-4 my-4"},[(0,o.bF)(i.W,{modelValue:u.contact.lastName,"onUpdate:modelValue":t[1]||(t[1]=e=>u.contact.lastName=e),modelModifiers:{trim:!0},"error-messages":u.errors.lastName,onChange:d.checkLastNameFieldComplete,autocomplete:"off",label:"Фамилия"},null,8,["modelValue","error-messages","onChange"]),(0,o.bF)(i.W,{modelValue:u.contact.firstName,"onUpdate:modelValue":t[2]||(t[2]=e=>u.contact.firstName=e),modelModifiers:{trim:!0},"error-messages":u.errors.firstName,onChange:d.checkFirstNameFieldComplete,autocomplete:"off",label:"Имя"},null,8,["modelValue","error-messages","onChange"]),(0,o.bF)(i.W,{modelValue:u.contact.phone,"onUpdate:modelValue":t[3]||(t[3]=e=>u.contact.phone=e),modelModifiers:{trim:!0},"error-messages":u.errors.phone,onChange:d.checkPhoneFieldComplete,autocomplete:"off",label:"Телефон",class:"mb-3"},null,8,["modelValue","error-messages","onChange"]),(0,o.bF)(r.D,{class:"me-4",color:"info",type:"submit"},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)("Сохранить")]))),_:1}),(0,o.bF)(r.D,{color:"secondary",onClick:d.resetForm},{default:(0,o.k6)((()=>t[8]||(t[8]=[(0,o.eW)("Очистить")]))),_:1},8,["onClick"])],32)],64)}var u={data(){return{isShowSuccessAlert:!1,contact:{firstName:"",lastName:"",phone:"",isChecked:!1},errors:{firstName:"",lastName:"",phone:""}}},methods:{checkFieldsIsvalid(e){let t=!0;0===e.firstName.length&&(this.errors.firstName="Заполните поле Имя",t=!1),0===e.lastName.length&&(this.errors.lastName="Заполните поле Фамилия",t=!1),0===e.phone.length&&(this.errors.phone="Заполните поле Телефон",t=!1);const s=Number(e.phone);return(isNaN(s)||s<0)&&(this.errors.phone="Неверный формат номера телефона",t=!1),t},checkFirstNameFieldComplete(){this.contact.firstName.length>0&&(this.errors.firstName="")},checkLastNameFieldComplete(){this.contact.lastName.length>0&&(this.errors.lastName="")},checkPhoneFieldComplete(){this.contact.phone.length>0&&(this.errors.phone="")},setExistPhoneInvalid(){this.errors.phone="Номер телефона уже существует"},submitForm(){if(!this.checkFieldsIsvalid(this.contact))return;const e={firstName:this.contact.firstName,lastName:this.contact.lastName,phone:this.contact.phone};this.$store.dispatch("createContact",e).then((()=>{this.resetForm(),this.showSuccessAlert()})).catch((t=>{400===t.response?.status?this.checkFieldsIsvalid(e):409===t.response?.status&&this.setExistPhoneInvalid()}))},resetForm(){this.contact={firstName:"",lastName:"",phone:""},this.errors={firstName:"",lastName:"",phone:""}},showSuccessAlert(){this.isShowSuccessAlert=!0}}},d=s(1241);const p=(0,d.A)(u,[["render",h]]);var f=p}}]);
//# sourceMappingURL=98.01927bd0.js.map